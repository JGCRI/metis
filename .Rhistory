"E"     ,    0,         0,    10,    0,         0,    0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
0,
0,
0,
0,
0
);X0
io<-metis.io(Z0=Z0,X0=X0,A0=A0,D=c(0,0,1,0,0,0))
Z0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    10,        0.01, 0,
"Ebio"  ,    0,         0,    0,    0,         0,    0.3,
"Esol"  ,    0,         0,    0,    0,         0,    0.7,
"E"     ,    0,         0,    10,    0,         0,    0);Z0
A0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    20,         1,    0,
"Ebio"  ,    0,         0,    0,    0,         0,    0,
"Esol"  ,    0,         0,    0,    0,         0,    0,
"E"     ,    0,         0,    10,    0,         0,    0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
0,
0,
0,
0,
0
);X0
io<-metis.io(Z0=Z0,X0=X0,A0=A0,D=c(0,0,1,0,0,0))
Z0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    10,        0.01, 0,
"Ebio"  ,    0,         0,    0,    0,         0,    0.3,
"Esol"  ,    0,         0,    0,    0,         0,    0.7,
"E"     ,    0,         0,    10,    0,         0,    0);Z0
A0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    2000,         1,    0,
"Ebio"  ,    0,         0,    0,    0,         0,    0,
"Esol"  ,    0,         0,    0,    0,         0,    0,
"E"     ,    0,         0,    10,    0,         0,    0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
0,
0,
0,
0,
0
);X0
io<-metis.io(Z0=Z0,X0=X0,A0=A0,D=c(0,0,1,0,0,0))
Z0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    10,        0.01, 0,
"Ebio"  ,    0,         0,    0,    0,         0,    0.3,
"Esol"  ,    0,         0,    0,    0,         0,    0.7,
"E"     ,    0,         0,    10,    0,         0,    0);Z0
A0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    2000,      1,    0,
"Ebio"  ,    0,         0,    0,    0,         0,    0.1,
"Esol"  ,    0,         0,    0,    0,         0,    0.9,
"E"     ,    0,         0,    10,   0,         0,    0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
0,
0,
0,
0,
0
);X0
io<-metis.io(Z0=Z0,X0=X0,A0=A0,D=c(0,0,1,0,0,0))
A0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    1,         1,    0,
"Ebio"  ,    0,         0,    0,    0,         0,    1,
"Esol"  ,    0,         0,    0,    0,         0,    0,
"E"     ,    0,         0,    10,   0,         0,    0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
0,
0,
0,
0,
0
);X0
io<-metis.io(Z0=Z0,X0=X0,A0=A0,D=c(0,0,1,0,0,0))
A0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    1,         1,    0,
"Ebio"  ,    0,         0,    0,    0,         0,    0,
"Esol"  ,    0,         0,    0,    0,         0,    0,
"E"     ,    0,         0,    10,   0,         0,    0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
0,
0,
0,
0,
0
);X0
io<-metis.io(Z0=Z0,X0=X0,A0=A0,D=c(0,0,1,0,0,0))
A0=tibble::tribble( # Initial Flows
~sector ,    ~W,         ~E,
"W"     ,    0,         1,
"E"     ,    1,        0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
0
);X0
io<-metis.io(A0=A0,X0=X0,D=c(1,0))
A0=tibble::tribble( # Initial Flows
~sector ,    ~W,         ~E,
"W"     ,    0,         1,
"E"     ,    1,        0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
10
);X0
io<-metis.io(A0=A0,X0=X0,D=c(1,0))
A0=tibble::tribble( # Initial Flows
~sector ,    ~W,         ~E,
"W"     ,    0,         0,
"E"     ,    1,        0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
10
);X0
io<-metis.io(A0=A0,X0=X0,D=c(1,0))
A0=tibble::tribble( # Initial Flows
~sector ,    ~W,         ~E,
"W"     ,    0,         0.1,
"E"     ,    1,        0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
10
);X0
io<-metis.io(A0=A0,X0=X0,D=c(1,0))
A0=tibble::tribble( # Initial Flows
~sector ,    ~W,         ~E,
"W"     ,    0,         0.9,
"E"     ,    1,        0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
10
);X0
io<-metis.io(A0=A0,X0=X0,D=c(1,0))
A0=tibble::tribble( # Initial Flows
~sector ,    ~W,         ~E,
"W"     ,    0,         0.9,
"E"     ,    0.9,        0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
10
);X0
io<-metis.io(A0=A0,X0=X0,D=c(1,0))
A0=tibble::tribble( # Initial Flows
~sector ,    ~W,         ~E,
"W"     ,    0,         1.1,
"E"     ,    0,         0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
10
);X0
io<-metis.io(A0=A0,X0=X0,D=c(1,0))
0=tibble::tribble( # Initial Flows
~sector ,    ~W,         ~E,
"W"     ,    0,         1.1,
"E"     ,    0,         0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
10
);X0
io<-metis.io(A0=A0,X0=X0,D=c(0,1))
A0=tibble::tribble( # Initial Flows
~sector ,    ~W,         ~E,
"W"     ,    0,         1.1,
"E"     ,    1.1,         0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
10
);X0
io<-metis.io(A0=A0,X0=X0,D=c(0,1))
A0=tibble::tribble( # Initial Flows
~sector ,    ~W,         ~E,
"W"     ,    0,           0.5,
"E"     ,    0.3,         0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
1
);X0
io<-metis.io(A0=A0,X0=X0,D=c(0,1))
io$A
io$L
Z0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    0.9,        1, 0,
"Ebio"  ,    0,         0,    0,    0,         0,    0.3,
"Esol"  ,    0,         0,    0,    0,         0,    0.7,
"E"     ,    0,         0,    0.1,    0,         0,    0);Z0
X0=tibble::tribble( # Initial total demand
~total,
0.5,
0.5,
1,
0.3,
0.7,
1
);X0
io<-metis.io(Z0=Z0,X0=X0,D=c(0,0,1,0,0,0))
io<-metis.io(Z0=Z0,D0=X0,D=c(0,0,1,0,0,0))
Z0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    0.9,       1,   0,
"Ebio"  ,    0,         0,    0,    0,         0,    0.3,
"Esol"  ,    0,         0,    0,    0,         0,    0.7,
"E"     ,    0,         0,    0.1,    0,         0,    0);Z0
A0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    1,         1,    0,
"Ebio"  ,    0,         0,    0,    0,         0,    1,
"Esol"  ,    0,         0,    0,    0,         0,    0,
"E"     ,    0,         0,    10,   0,         0,    0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
0,
0,
0,
0,
0
);X0
io<-metis.io(Z0=Z0,D0=X0,D=c(0,0,1,0,0,0))
# Problem 2.1
Z0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    0.9,       0.1,   0,
"Ebio"  ,    0,         0,    0,    0,         0,    0.3,
"Esol"  ,    0,         0,    0,    0,         0,    0.7,
"E"     ,    0,         0,    0.1,    0,         0,    0);Z0
X0=tibble::tribble( # Initial total demand
~total,
0,
0,
0,
0,
0,
0
);X0
io<-metis.io(Z0=Z0,D0=X0,D=c(0,0,1,0,0,0))
Z0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    0.9,       0.1,   0,
"Ebio"  ,    0,         0,    0,    0,         0,    0.3,
"Esol"  ,    0,         0,    0,    0,         0,    0.7,
"E"     ,    0,         0,    0.1,    0,         0,    0);Z0
A0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    1,         1,    0,
"Ebio"  ,    0,         0,    0,    0,         0,    1,
"Esol"  ,    0,         0,    0,    0,         0,    0,
"E"     ,    0,         0,    10,   0,         0,    0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
0,
0,
0,
0,
1
);X0
io<-metis.io(Z0=Z0,D0=X0,D=c(0,0,1,0,0,0))
io<-metis.io(Z0=Z0,D0=X0,D=c(0,0,0,0,0,0))
Z0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    0.5,       0.5,   0,
"Ebio"  ,    0,         0,    0,    0,         0,    0.1,
"Esol"  ,    0,         0,    0,    0,         0,    0.1,
"E"     ,    0,         0,    0.1,    0,         0,    0);Z0
A0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    1,         1,    0,
"Ebio"  ,    0,         0,    0,    0,         0,    1,
"Esol"  ,    0,         0,    0,    0,         0,    0,
"E"     ,    0,         0,    10,   0,         0,    0);A0
X0=tibble::tribble( # Initial total demand
~total,
0,
0,
0,
0,
0,
1
);X0
io<-metis.io(Z0=Z0,D0=X0,D=c(0,0,0,0,0,0))
NULL->year->sector->domestic->export->total->V1->value->.->other->production->other
#------------------
# Create Folders if needed
#------------------
if (!dir.exists(dirOutputs)){
dir.create(dirOutputs)}
if (!dir.exists(paste(dirOutputs, "/IO", sep = ""))){
dir.create(paste(dirOutputs, "/IO", sep = ""))}
addMissing<-function(data){
if(!"scenario"%in%names(data)){data<-data%>%dplyr::mutate(scenario="scenario")}
if(!"x"%in%names(data)){if("year"%in%names(data)){
data<-data%>%dplyr::mutate(x=year)}else{data<-data%>%dplyr::mutate(x="x")}}
if(!"region"%in%names(data)){data<-data%>%dplyr::mutate(region="region")}
if(!"classPalette"%in%names(data)){data<-data%>%dplyr::mutate(classPalette="pal_hot")}
if(!"param"%in%names(data)){data<-data%>%dplyr::mutate(param="param")}
return(data)
}
!is.null(A0)
names(D0)="other"
total=(D0+rowSums(Z0%>%dplyr::select(-sector)))%>%dplyr::rename(total=names(D0))
ioTbl<-dplyr::bind_cols(Z0,D0,total)
toal
total
Z0
total=(D0+rowSums(Z0%>%dplyr::select(-sector)))%>%dplyr::rename(total=names(D0))
D0
D0=tibble::tribble( # Initial total demand
~total,
0,
0,
0,
0,
0,
1
);D0
names(D0)="other"
total=(D0+rowSums(Z0%>%dplyr::select(-sector)))%>%dplyr::rename(total=names(D0))
ioTbl<-dplyr::bind_cols(Z0,D0,total)
ioTbl
A<-as.matrix(Z0%>%dplyr::select(-sector)) %*% as.matrix(ioTbl$total^-1*diag(nrow(Z0)));
A
as.matrix(ioTbl$total^-1*diag(nrow(Z0))
)
as.matrix(Z0%>%dplyr::select(-sector))
A<-as.matrix(Z0%>%dplyr::select(-sector)) %*% as.matrix(ioTbl$total^-1*diag(nrow(Z0)));
A
Z0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    0.5,       0.5,   0,
"Ebio"  ,    0,         0,    0,    0,         0,    0.1,
"Esol"  ,    0,         0,    0,    0,         0,    0.1,
"E"     ,    0,         0,    0.1,    0,         0,    0);Z0
A0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    1,         1,    0,
"Ebio"  ,    0,         0,    0,    0,         0,    1,
"Esol"  ,    0,         0,    0,    0,         0,    0,
"E"     ,    0,         0,    10,   0,         0,    0);A0
D0=tibble::tribble( # Initial total demand
~total,
0,
0,
0,
0,
0,
1
);D0
io<-metis.io(Z0=Z0,D0=D0,D=c(0,0,0,0,0,0))
Z0=tibble::tribble( # Initial Flows
~sector ,    ~W,         ~E,
"W"     ,    0,           0.5,
"E"     ,    0.3,         0);A0
D0=tibble::tribble( # Initial total demand
~total,
0,
0
);D0
io<-metis.io(Z0=Z0,D0=D0,D=c(0,1))
Z0=tibble::tribble( # Initial Flows
~sector ,    ~W,         ~E,
"W"     ,    0,           0.5,
"E"     ,    0.3,         0);A0
D0=tibble::tribble( # Initial total demand
~total,
1,
1
);D0
io<-metis.io(Z0=Z0,D0=D0,D=c(0,1))
Z0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    0.5,       0.5,   0,
"Ebio"  ,    0,         0,    0,    0,         0,    0.3,
"Esol"  ,    0,         0,    0,    0,         0,    0.7,
"E"     ,    0,         0,    0.1,    0,         0,    0);Z0
D0=tibble::tribble( # Initial total demand
~total,
1,
1,
1,
1,
1,
1
);D0
io<-metis.io(Z0=Z0,D0=D0,D=c(0,0,0,0,0,0))
D0=tibble::tribble( # Initial total demand
~total,
0.5,
0.5,
1,
0.3,
0.7,
1
);D0
io<-metis.io(Z0=Z0,D0=D0,D=c(0,0,0,0,0,0))
io<-metis.io(Z0=Z0,D0=D0,D=c(0,0,1,0,0,0))
# Problem 2.1
Z0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    0.5,       0.5,   0,
"Ebio"  ,    0,         0,    0,    0,         0,    0.3,
"Esol"  ,    0,         0,    0,    0,         0,    0.7,
"E"     ,    0,         0,    0.1,    0,         0,    0);Z0
A0=tibble::tribble( # Initial Flows
~sector ,    ~Wgw,      ~Ws, ~ W,   ~Ebio, ~ Esol, ~ E,
"Wgw"   ,    0,         0,    0.5,  0,         0,    0,
"Ws"    ,    0,         0,    0.5,  0,         0,    0,
"W"     ,    0,         0,    0,    1,         1,    0,
"Ebio"  ,    0,         0,    0,    0,         0,    1,
"Esol"  ,    0,         0,    0,    0,         0,    0,
"E"     ,    0,         0,    10,   0,         0,    0);A0
D0=tibble::tribble( # Initial total demand
~total,
0.5,
0.5,
1,
0.7,
0.3,
1
);D0
io<-metis.io(Z0=Z0,D0=D0,D=c(0,0,1,0,0,0))
D0=tibble::tribble( # Initial total demand
~total,
0.5,
0.5,
1,
0.3,
0.7,
1
);D0
io<-metis.io(Z0=Z0,D0=D0,D=c(0,0,1,0,0,0))
D0=tibble::tribble( # Initial total demand
~total,
0,
0,
1,
0,
0,
1
);D0
io<-metis.io(Z0=Z0,D0=D0,D=c(0,0,1,0,0,0))
